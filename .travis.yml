cache: bundler
language: ruby
rvm:
- 2.2.3
addons:
  postgresql: '9.4'
before_script:
- psql -c "create database openipsumapitest;" -U postgres
notifications:
  email: false
script:
- bundle exec rake rubocop
- bundle exec rake spec
after_success:
- eval "$(ssh-agent -s)"
- chmod 600 deployment/deploy_key.pem
- ssh-add deployment/deploy_key.pem
- git remote add deploy $DEPLOY_URL
- git push deploy
before_install:
- openssl aes-256-cbc -K $encrypted_9ad051952287_key -iv $encrypted_9ad051952287_iv
  -in deployment/deploy_key.pem.enc -out deployment/deploy_key.pem -d
env:
  global:
    secure: F8sC9vSfBtOU7HWba79F6jzVrw5FMvYJsS4pPEUZOuBYhi3rp73z1vHPI7cvavIPFHYfa/fwjWDukfxEJHtA46X1b/haCqr0QgM+XkaLQavu6L5M35u9/nduaoIMAgmd0B296HytVUSoQQF0Ds3T0YLJAIT3yhZYvvoDyFbxpi6ezOkVfPnVYO6WmeHaYZZCK19Ey3/ab3cmfZlhm3Y6lKYtEzRC2psuO2A3ZtPsJCQ+NToO61CXv+DnV9QxjqtnQ7siva906m+PR7uvTT4dXS8LYZtyCJ/1PUQ5MPkxAjarBoW+DLaCkAdW18fPfcsawUPD7Nfh0Qf+t4rXwvfJZAEoaUfprJizbc2KtjorXbihkT0qSOIWqot83m0ngJgFvHyfu2q2HgVPvru7vQvTqemLeXYb3SmlhECTXYmDI8ffqhMDCFuJD97etjRARzrgEu1v9+UleFww5VYLFaGrLOqdw8gHiLeutH/VP9NuWIGMPotPs7G15La0A1rWdyrrPhFrYMG2YqGP5jyqEwAS+cTc03rkHw0lX2pNJ5HuJpiPY+qUkr8TtASI/VyZe1kNWVjT/HSatr9f/tQiku1Lb1+FtkFy/C5NK9ol+9qyiSQdgYx1NVKNEXjFJWsGXElXC6AIk5GHDYmzqv6zNrKkHUD5+TZmhIMc5b40kslwbPk=

# addons:
#   ssh_known_hosts: openipsum.com
